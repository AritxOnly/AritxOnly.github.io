---
import Layout from '~/layouts/Layout.astro'
import data from '~/data/music.json'

type Track = { 
    title: string; 
    cover: string;  
    link: string;
    release_date?: string
}
const upcoming: Track[] = (data as any).upcoming ?? []
const recent: Track[] = (data as any).recent ?? []
---

<Layout title="音乐作品" description="Aritx 音唯的原创 / 混音作品与播放清单">
    <br>
  <section class="space-y-10">
    <div>
        <div id="diary-background" class="cover-background"></div>
        <div id="diary-trailer">
            <p class="title">
                New Album: diary.
            </p>
            <p>
                Release on:<br>
                MjAyNS80LzIyCkNvbWluZyBTb29u
            </p>
        </div>
    </div>
    <p class="music-title">即将发行</p>
    <div class="music-cover">
        {upcoming.length === 0 ? (
            <p>-- 暂无 --</p>
          ) : (
            upcoming.map((t) => (
              <a href={t.link} target="_blank" rel="noopener">
                <img src={t.cover} alt={t.title} loading="lazy" />
              </a>
            ))
          )} 
    </div>
    <p class="music-title">最近发行</p>
    <div class="music-cover">
        {recent.map((t) => (
            <a href={t.link} target="_blank" rel="noopener">
              <img src={t.cover} alt={t.title} loading="lazy" />
            </a>
          ))}
    </div>
  </section>
</Layout>

<style>

#musicplayer {
    position: fixed;
    bottom: 10px;
    left: 5px;
    opacity: 0.7;
    z-index: 999;
    border-radius: 16px;
}

#diary-background {
    background-image: url("../res/diary-draft.png");
}

.cover-background {
    border-radius: 8px;
    float: left;
    height: 380px;
    width: 100%;
    background-size: cover;
    background-position:center;
    background-repeat:no-repeat;
    -webkit-filter: blur(9px);
    -moz-filter: blur(9px);
    -o-filter: blur(9px);
    -ms-filter: blur(9px);
    filter:blur(9px);
}

#diary-trailer {
    position: absolute;
    top: 250px;
    left: 0px;
    right: 0px;
    align-items: center;
    text-align: center;
    width: 100%;
    height: 400px;
}

#diary-trailer p {
    text-align: center;
    color: #f05d5dcf;
    font-size: 20px;
}

#diary-trailer .title {
    font-size: 40px;
}

#diary-trailer span {
    /* color: #0000006f; */
}

.music-title {
    border: 20px;
    margin: 20px;
    font-weight: 700;
    font-size: 22px;
    text-align: center;
}

.music-cover {
    text-align: center;
    align-items: center;
}

.music-cover img {
    border-radius: 8px;
    box-shadow: 5px 5px 7px 1px #bbb;
    display: inline-block;
    width: 220px;
}
</style>