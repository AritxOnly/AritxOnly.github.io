---
type Cta = { style?: "primary" | "secondary"; label: string; href: string; external?: boolean };
type HeroData = {
  kicker?: string;
  title: string;
  subtitle?: string;
  ctas?: Cta[];
  metaPills?: string[];
  device?: { title?: string; badge?: string; placeholder?: string; image?: string; imageAlt?: string };
};

const { assets, data } = Astro.props as { assets?: { heroImage?: string }; data: HeroData };

const deviceImage = data.device?.image ?? assets?.heroImage ?? "";
---

<section class="hero">
  <div class="wrap hero-grid">
    <div class="fade">
      {data.kicker ? (
        <div class="kicker">
          <span class="pill"></span>
          <span>{data.kicker}</span>
        </div>
      ) : null}

      <h1 class="title">{data.title}</h1>
      {data.subtitle ? <p class="subtitle">{data.subtitle}</p> : null}

      <div class="cta">
        {data.ctas?.map((c) => (
          <a
            class={`btn ${c.style === "primary" ? "primary" : ""}`}
            href={c.href}
            target={c.external ? "_blank" : undefined}
            rel={c.external ? "noreferrer" : undefined}
          >
            {c.label}
          </a>
        ))}
      </div>

      {data.metaPills?.length ? (
        <div class="meta">
          {data.metaPills.map((t) => (
            <span><span class="pill"></span>{t}</span>
          ))}
        </div>
      ) : null}
    </div>

    <div class="device fade" style="animation-delay:.08s">
      <div class="device-top">
        <span>{data.device?.title ?? "Preview"}</span>
        <span>{data.device?.badge ?? ""}</span>
      </div>

      <div class="screen">
        {deviceImage ? (
          <img class="screen-img" src={deviceImage} alt={data.device?.imageAlt ?? "Preview"} />
        ) : (
          <span class="screen-ph">{data.device?.placeholder ?? "Add screenshot"}</span>
        )}
      </div>
    </div>
  </div>
</section>

<style>
  .hero{padding:72px 0 34px}
  .hero-grid{
    display:grid; gap:28px;
    grid-template-columns: 1.15fr .85fr;
    align-items:center;
  }
  @media (max-width: 920px){ .hero-grid{grid-template-columns:1fr} }
  .kicker{
    display:inline-flex; align-items:center; gap:10px;
    padding:8px 12px; border-radius:999px;
    border:1px solid var(--line);
    background: rgba(255,255,255,.04);
    color:var(--muted); font-size:13px;
  }
  .title{
    margin:14px 0 10px;
    font-size:56px;
    line-height:1.02;
    letter-spacing:-.8px;
  }
  @media (max-width: 520px){ .title{font-size:42px} }
  .subtitle{
    margin:0 0 18px;
    color:var(--muted);
    font-size:16px;
    line-height:1.6;
    max-width:58ch;
  }
  .cta{display:flex; flex-wrap:wrap; gap:12px; margin-top:18px}
  .meta{
    margin-top:18px; display:flex; flex-wrap:wrap; gap:14px;
    color:var(--muted); font-size:13px;
  }
  .meta span{display:inline-flex; align-items:center; gap:8px}

  .device{
    border-radius: var(--radius);
    border: 1px solid var(--line);
    background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
    box-shadow: var(--shadow);
    padding:18px;
  }
  .device-top{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 10px 14px;
    border-bottom:1px solid rgba(255,255,255,.08);
    color: var(--muted);
    font-size:13px;
  }
  .screen{
    margin-top:16px;
    border-radius: 18px;
    border: 1px solid rgba(255,255,255,.12);
    background:
      radial-gradient(600px 400px at 30% 20%, rgba(77,163,255,.18), transparent 60%),
      radial-gradient(500px 380px at 80% 30%, rgba(155,123,255,.14), transparent 55%),
      rgba(0,0,0,.35);
    height: 360px;
    display:flex; align-items:center; justify-content:center;
    overflow:hidden;
  }
  .screen-img{width:100%;height:100%;object-fit:cover}
  .screen-ph{color: rgba(255,255,255,.6); font-size:14px; padding:18px; text-align:center}
</style>